<!-- build time:Fri Jul 12 2019 17:34:41 GMT+0800 (GMT+08:00) --><!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="description" content="背景目前OneAlert提供短信、邮件、电话、APP四种通知通道，其中前三种的使用量最高(90%以上的用户)，因此靠谱的第三方推送提供商至关重要。经过对各种三方推送服务的公司调研，目前锁定了阿里大鱼[2]、容联云[3]、云片[4]、云之讯[5]、SendCloud[6]，这5家平台提供商。"><meta name="keywords" content="业务场景,通知推送,轮询算法"><meta property="og:type" content="article"><meta property="og:title" content="看起来简单的通知推送服务，真的简单吗"><meta property="og:url" content="http://houqian.xyz/2016/05/31/看起来简单的通知推送服务，真的简单吗/index.html"><meta property="og:site_name" content="且听风吟"><meta property="og:description" content="背景目前OneAlert提供短信、邮件、电话、APP四种通知通道，其中前三种的使用量最高(90%以上的用户)，因此靠谱的第三方推送提供商至关重要。经过对各种三方推送服务的公司调研，目前锁定了阿里大鱼[2]、容联云[3]、云片[4]、云之讯[5]、SendCloud[6]，这5家平台提供商。"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="http://houqian.xyz/2016/05/31/看起来简单的通知推送服务，真的简单吗/pexels-photo-335907.jpeg"><meta property="og:image" content="http://houqian.xyz/2016/05/31/看起来简单的通知推送服务，真的简单吗/%E6%8E%A8%E9%80%81%E6%A8%A1%E5%9E%8B.svg"><meta property="og:image" content="http://houqian.xyz/2016/05/31/看起来简单的通知推送服务，真的简单吗/%E8%B6%85%E5%87%BA%E9%85%8D%E9%A2%9D.svg"><meta property="og:image" content="http://houqian.xyz/2016/05/31/看起来简单的通知推送服务，真的简单吗/%E8%B6%85%E5%87%BA%E9%85%8D%E9%A2%9D_%E6%8E%A8%E9%80%81%E6%9C%8D%E5%8A%A1%E5%95%86%E9%85%8D%E9%A2%9D%E7%8A%B6%E6%80%81%E6%9C%8D%E5%8A%A1.svg"><meta property="og:image" content="http://houqian.xyz/2016/05/31/看起来简单的通知推送服务，真的简单吗/%E8%B6%85%E5%87%BA%E9%85%8D%E9%A2%9D_%E8%AE%B0%E5%BD%95%E6%8E%A8%E9%80%81%E7%8A%B6%E6%80%81.svg"><meta property="og:image" content="http://houqian.xyz/2016/05/31/看起来简单的通知推送服务，真的简单吗/%E8%B6%85%E5%87%BA%E9%85%8D%E9%A2%9D_%E5%8A%A0%E6%9D%83%E8%BD%AE%E8%AF%A2%E6%96%B9%E6%A1%88.svg"><meta property="og:updated_time" content="2019-07-04T12:45:44.687Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="看起来简单的通知推送服务，真的简单吗"><meta name="twitter:description" content="背景目前OneAlert提供短信、邮件、电话、APP四种通知通道，其中前三种的使用量最高(90%以上的用户)，因此靠谱的第三方推送提供商至关重要。经过对各种三方推送服务的公司调研，目前锁定了阿里大鱼[2]、容联云[3]、云片[4]、云之讯[5]、SendCloud[6]，这5家平台提供商。"><meta name="twitter:image" content="http://houqian.xyz/2016/05/31/看起来简单的通知推送服务，真的简单吗/pexels-photo-335907.jpeg"><link rel="shortcut icon" href="/images/favicon.ico"><link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><title>看起来简单的通知推送服务，真的简单吗</title><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/rtl.css"></head><body class="max-width mx-auto px3 ltr"><div id="header-post"><a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick='$("html, body").animate({scrollTop:0},"fast")' style="display:none"><i class="fas fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">首页</a></li><li><a href="/about/">关于</a></li><li><a href="/archives/">归档</a></li><li><a href="/tags/">标签</a></li><li><a href="https://github.com/houqian">项目</a></li><li><a href="/search/">搜索</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="/2016/07/01/TreeMap内部原理(一)/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle()' onmouseout='$("#i-prev").toggle()'></i></a></li><li><a class="icon" href="/2016/03/15/hashmap内部原理/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle()' onmouseout='$("#i-next").toggle()'></i></a></li><li><a class="icon" href="#" onclick='$("html, body").animate({scrollTop:0},"fast")'><i class="fas fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle()' onmouseout='$("#i-top").toggle()'></i></a></li><li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle()' onmouseout='$("#i-share").toggle()' onclick='return $("#share").toggle(),!1'></i></a></li></ul><span id="i-prev" class="info" style="display:none">上一篇</span> <span id="i-next" class="info" style="display:none">下一篇</span> <span id="i-top" class="info" style="display:none">返回顶部</span> <span id="i-share" class="info" style="display:none">分享文章</span></span><br><div id="share" style="display:none"><ul><li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://houqian.xyz/2016/05/31/看起来简单的通知推送服务，真的简单吗/"><i class="fab fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=http://houqian.xyz/2016/05/31/看起来简单的通知推送服务，真的简单吗/&text=看起来简单的通知推送服务，真的简单吗"><i class="fab fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://houqian.xyz/2016/05/31/看起来简单的通知推送服务，真的简单吗/&title=看起来简单的通知推送服务，真的简单吗"><i class="fab fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://houqian.xyz/2016/05/31/看起来简单的通知推送服务，真的简单吗/&is_video=false&description=看起来简单的通知推送服务，真的简单吗"><i class="fab fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=看起来简单的通知推送服务，真的简单吗&body=Check out this article: http://houqian.xyz/2016/05/31/看起来简单的通知推送服务，真的简单吗/"><i class="fas fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=http://houqian.xyz/2016/05/31/看起来简单的通知推送服务，真的简单吗/&title=看起来简单的通知推送服务，真的简单吗"><i class="fab fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=http://houqian.xyz/2016/05/31/看起来简单的通知推送服务，真的简单吗/&title=看起来简单的通知推送服务，真的简单吗"><i class="fab fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://houqian.xyz/2016/05/31/看起来简单的通知推送服务，真的简单吗/&title=看起来简单的通知推送服务，真的简单吗"><i class="fab fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=http://houqian.xyz/2016/05/31/看起来简单的通知推送服务，真的简单吗/&title=看起来简单的通知推送服务，真的简单吗"><i class="fab fa-digg" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.tumblr.com/share/link?url=http://houqian.xyz/2016/05/31/看起来简单的通知推送服务，真的简单吗/&name=看起来简单的通知推送服务，真的简单吗&description=&lt;!-- build time:Fri Jul 12 2019 17:34:38 GMT+0800 (GMT+08:00) --&gt;&lt;p&gt;&lt;img src=&#34;/2016/05/31/看起来简单的通知推送服务，真的简单吗/pexels-photo-335907.jpeg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;&lt;h1 id=&#34;背景&#34;&gt;&lt;a href=&#34;#背景&#34; class=&#34;headerlink&#34; title=&#34;背景&#34;&gt;&lt;/a&gt;背景&lt;/h1&gt;&lt;p&gt;目前OneAlert提供短信、邮件、电话、APP四种通知通道，其中前三种的使用量最高(90%以上的用户)，因此靠谱的第三方推送提供商至关重要。经过对各种三方推送服务的公司调研，目前锁定了阿里大鱼&lt;sup id=&#34;fnref:2&#34;&gt;&lt;a href=&#34;#fn:2&#34; rel=&#34;footnote&#34;&gt;&lt;span class=&#34;hint--top hint--large hint--rounded hint--bounce&#34; aria-label=&#34;https://dayu.aliyun.com 阿里大鱼
&#34;&gt;[2]&lt;/span&gt;&lt;/a&gt;&lt;/sup&gt;、容联云&lt;sup id=&#34;fnref:3&#34;&gt;&lt;a href=&#34;#fn:3&#34; rel=&#34;footnote&#34;&gt;&lt;span class=&#34;hint--top hint--large hint--rounded hint--bounce&#34; aria-label=&#34;https://www.yuntongxun.com/ 容联云
&#34;&gt;[3]&lt;/span&gt;&lt;/a&gt;&lt;/sup&gt;、云片&lt;sup id=&#34;fnref:4&#34;&gt;&lt;a href=&#34;#fn:4&#34; rel=&#34;footnote&#34;&gt;&lt;span class=&#34;hint--top hint--large hint--rounded hint--bounce&#34; aria-label=&#34;https://www.yunpian.com 云片
&#34;&gt;[4]&lt;/span&gt;&lt;/a&gt;&lt;/sup&gt;、云之讯&lt;sup id=&#34;fnref:5&#34;&gt;&lt;a href=&#34;#fn:5&#34; rel=&#34;footnote&#34;&gt;&lt;span class=&#34;hint--top hint--large hint--rounded hint--bounce&#34; aria-label=&#34;https://www.ucpaas.com 云之讯
&#34;&gt;[5]&lt;/span&gt;&lt;/a&gt;&lt;/sup&gt;、SendCloud&lt;sup id=&#34;fnref:6&#34;&gt;&lt;a href=&#34;#fn:6&#34; rel=&#34;footnote&#34;&gt;&lt;span class=&#34;hint--top hint--large hint--rounded hint--bounce&#34; aria-label=&#34;https://sendcloud.sohu.com/ SendCloud&#34;&gt;[6]&lt;/span&gt;&lt;/a&gt;&lt;/sup&gt;，这5家平台提供商。&lt;/p&gt;"><i class="fab fa-tumblr" aria-hidden="true"></i></a></li></ul></div><div id="toc"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#背景"><span class="toc-number">1.</span> <span class="toc-text">背景</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#s1-发送成功"><span class="toc-number">1.1.</span> <span class="toc-text">s1:发送成功</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#s2-超出配额"><span class="toc-number">1.2.</span> <span class="toc-text">s2:超出配额</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#换个重发"><span class="toc-number">1.2.1.</span> <span class="toc-text">换个重发</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#独立状态服务"><span class="toc-number">1.2.2.</span> <span class="toc-text">独立状态服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#小结"><span class="toc-number">1.2.3.</span> <span class="toc-text">小结</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#换个思路"><span class="toc-number">2.</span> <span class="toc-text">换个思路</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#小结-1"><span class="toc-number">2.1.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#最后方案"><span class="toc-number">3.</span> <span class="toc-text">最后方案</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Reference"><span class="toc-number">4.</span> <span class="toc-text">Reference</span></a></li></ol></div></span></div><div class="content index py4"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">看起来简单的通知推送服务，真的简单吗</h1><div class="meta"><span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">且听风吟</span></span><div class="postdate"><time datetime="2016-05-31T10:49:57.000Z" itemprop="datePublished">2016-05-31</time></div><div class="article-category"><i class="fas fa-archive"></i> <a class="category-link" href="/categories/计算机科学与技术/">计算机科学与技术</a></div><div class="article-tag"><i class="fas fa-tag"></i> <a class="tag-link" href="/tags/业务场景/">业务场景</a>, <a class="tag-link" href="/tags/轮询算法/">轮询算法</a>, <a class="tag-link" href="/tags/通知推送/">通知推送</a></div></div></header><div class="content" itemprop="articleBody"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><p><img src="/2016/05/31/看起来简单的通知推送服务，真的简单吗/pexels-photo-335907.jpeg" alt=""></p><h1 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h1><p>目前OneAlert提供短信、邮件、电话、APP四种通知通道，其中前三种的使用量最高(90%以上的用户)，因此靠谱的第三方推送提供商至关重要。经过对各种三方推送服务的公司调研，目前锁定了阿里大鱼<sup id="fnref:2"><a href="#fn:2" rel="footnote"><span class="hint--top hint--large hint--rounded hint--bounce" aria-label="https://dayu.aliyun.com 阿里大鱼
">[2]</span></a></sup>、容联云<sup id="fnref:3"><a href="#fn:3" rel="footnote"><span class="hint--top hint--large hint--rounded hint--bounce" aria-label="https://www.yuntongxun.com/ 容联云
">[3]</span></a></sup>、云片<sup id="fnref:4"><a href="#fn:4" rel="footnote"><span class="hint--top hint--large hint--rounded hint--bounce" aria-label="https://www.yunpian.com 云片
">[4]</span></a></sup>、云之讯<sup id="fnref:5"><a href="#fn:5" rel="footnote"><span class="hint--top hint--large hint--rounded hint--bounce" aria-label="https://www.ucpaas.com 云之讯
">[5]</span></a></sup>、SendCloud<sup id="fnref:6"><a href="#fn:6" rel="footnote"><span class="hint--top hint--large hint--rounded hint--bounce" aria-label="https://sendcloud.sohu.com/ SendCloud">[6]</span></a></sup>，这5家平台提供商。</p><a id="more"></a><p>首先我们来分析一下接入三方后的通讯模型</p><p><img src="/2016/05/31/看起来简单的通知推送服务，真的简单吗/%E6%8E%A8%E9%80%81%E6%A8%A1%E5%9E%8B.svg" alt="推送模型"></p><blockquote><p>注：配额这里是指三方服务商的发送限制，比如每小时最多每个电话拨打几次</p></blockquote><p>我们作为一个服务提供商，必然要确保用户的告警可以准确、准时、不漏的投递给用户，这个问题看起来一目了然，没什么难度，其实不然，我们分析下以上通信模型中的几种情况：</p><h2 id="s1-发送成功"><a href="#s1-发送成功" class="headerlink" title="s1:发送成功"></a>s1:发送成功</h2><p>最好的情况（这里由于无法真正的监控第三方是否真正投递到了用户，不过根据以往的工单经验，丢失的概率很小）</p><h2 id="s2-超出配额"><a href="#s2-超出配额" class="headerlink" title="s2:超出配额"></a>s2:超出配额</h2><h3 id="换个重发"><a href="#换个重发" class="headerlink" title="换个重发"></a>换个重发</h3><p>超出配额，那就换个重发呗？这是下意识的解决思路，我们看看有什么问题：</p><p><img src="/2016/05/31/看起来简单的通知推送服务，真的简单吗/%E8%B6%85%E5%87%BA%E9%85%8D%E9%A2%9D.svg" alt="超出配额"></p><h3 id="独立状态服务"><a href="#独立状态服务" class="headerlink" title="独立状态服务"></a>独立状态服务</h3><p>很直观的发现，重试的次数有可能会很多，这非常影响推送实时性。马上，我们又会想到可以对每次超出配额的情况进行缓存，提炼一个状态服务，如下：</p><p><img src="/2016/05/31/看起来简单的通知推送服务，真的简单吗/%E8%B6%85%E5%87%BA%E9%85%8D%E9%A2%9D_%E6%8E%A8%E9%80%81%E6%9C%8D%E5%8A%A1%E5%95%86%E9%85%8D%E9%A2%9D%E7%8A%B6%E6%80%81%E6%9C%8D%E5%8A%A1.svg" alt="超出配额_推送服务商配额状态服务"></p><p>问题到此为止，一切美好已经发生… 遗憾的是，该状态服务几乎是不可用的。我们可以进一步思考：</p><p>当第一次配额超出的情况发生时，按照上面的设计，该状态服务会缓存下来；</p><p>当第二次推送来临时，会首先请求状态服务，拿到配额超出的那个服务商，排除掉它，使用其他服务商发送</p><p>当第三次推送来临时，会首先请求状态服务，拿到配额超出的那个服务商，排除掉它，使用其他服务商发送</p><p>…</p><p>当第n次推送…</p><p>此时问题一目了然，某个三方服务商第一次超出配额后就不再被请求了，这显然不是我们要的。如果我们试图及时、恰当的让某超出配额的状态失效掉，问题是我们如何知道什么时间或者哪一次请求时让其失效呢？</p><h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><p>目前看来，针对简单的请求-重试模型是很难解决我们的问题的。</p><h1 id="换个思路"><a href="#换个思路" class="headerlink" title="换个思路"></a>换个思路</h1><p>上面所有的方案每次发送都是无状态的，如果我们对每个时间段每次发送用的哪个服务商记录下来，结合配额限制，这样是不是可以做到避免处罚超出配额的问题呢？</p><p>我们来分析下：</p><p><img src="/2016/05/31/看起来简单的通知推送服务，真的简单吗/%E8%B6%85%E5%87%BA%E9%85%8D%E9%A2%9D_%E8%AE%B0%E5%BD%95%E6%8E%A8%E9%80%81%E7%8A%B6%E6%80%81.svg" alt="超出配额_记录推送状态"></p><p>嗯… 此时貌似已经解决了问题。不过从设计来看，NotifySender职责太多了，既要负责发送消息，又得记录发送状态，不符合单一职责原则。如果将来对三方服务商做增加、下线操作，还要动NotifySender，显然是不合理的。</p><h2 id="小结-1"><a href="#小结-1" class="headerlink" title="小结"></a>小结</h2><p>通过有状态的发送，解决了配额问题，但NotifySender职责太多，不利于拓展，需要再次设计。</p><h1 id="最后方案"><a href="#最后方案" class="headerlink" title="最后方案"></a>最后方案</h1><p>事实上，我们需要一个这样的服务，它能根据三方服务商目前的配额情况，自动的给我们的消息路由到合适的服务商。</p><blockquote><p>实质上，对于每次发送「计数」这件事，其实可以换一个角度思考，我们只要确保在单位时间内，按照配额作为权重将消息分发给服务商即可，这样也能确保不会触发超出配额异常。</p><p>由于篇幅关系，这里不对轮询算法进行展开讨论，而且本身算法不是重点，此类算法网上一搜一大堆，笔者也不想赘述，重要的是我们对业务场景进行实质分析。</p><p>ok，直接给出结论：加权轮询算法（如果读者有兴趣，可以给我发邮件，我们一起讨论: P）</p></blockquote><p><img src="/2016/05/31/看起来简单的通知推送服务，真的简单吗/%E8%B6%85%E5%87%BA%E9%85%8D%E9%A2%9D_%E5%8A%A0%E6%9D%83%E8%BD%AE%E8%AF%A2%E6%96%B9%E6%A1%88.svg" alt="超出配额_加权轮询方案"></p><p>对调度服务的补充解释：</p><p>我们选择将服务商信息存放在配置中心里，主要考虑了以下几点：</p><ul><li>如果服务商将来由于各种原因维护，我们只需要从配置中心去掉这个服务商即可，NotifySender不需要做任何改动</li><li>如果服务商将来更改了配额，我们只需要在配置中心重新配置一下这个服务商的配额信息即可，NotifySender也不需要做任何改动</li></ul><h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><div id="footnotes"><hr><div id="footnotelist"><ol style="list-style:none;padding-left:0;margin-left:40px"><li id="fn:1"><span style="display:inline-block;vertical-align:top;padding-right:10px;margin-left:-40px">1.</span><span style="display:inline-block;vertical-align:top;margin-left:10px">https://www.onealert.com OneAlert是OneAPM旗下的一站式运维事件管理平台<a href="#fnref:1" rev="footnote"> ↩</a></span></li><li id="fn:2"><span style="display:inline-block;vertical-align:top;padding-right:10px;margin-left:-40px">2.</span><span style="display:inline-block;vertical-align:top;margin-left:10px">https://dayu.aliyun.com 阿里大鱼<a href="#fnref:2" rev="footnote"> ↩</a></span></li><li id="fn:3"><span style="display:inline-block;vertical-align:top;padding-right:10px;margin-left:-40px">3.</span><span style="display:inline-block;vertical-align:top;margin-left:10px">https://www.yuntongxun.com/ 容联云<a href="#fnref:3" rev="footnote"> ↩</a></span></li><li id="fn:4"><span style="display:inline-block;vertical-align:top;padding-right:10px;margin-left:-40px">4.</span><span style="display:inline-block;vertical-align:top;margin-left:10px">https://www.yunpian.com 云片<a href="#fnref:4" rev="footnote"> ↩</a></span></li><li id="fn:5"><span style="display:inline-block;vertical-align:top;padding-right:10px;margin-left:-40px">5.</span><span style="display:inline-block;vertical-align:top;margin-left:10px">https://www.ucpaas.com 云之讯<a href="#fnref:5" rev="footnote"> ↩</a></span></li><li id="fn:6"><span style="display:inline-block;vertical-align:top;padding-right:10px;margin-left:-40px">6.</span><span style="display:inline-block;vertical-align:top;margin-left:10px">https://sendcloud.sohu.com/ SendCloud<a href="#fnref:6" rev="footnote"> ↩</a></span></li></ol></div></div></div></article><div id="footer-post-container"><div id="footer-post"><div id="nav-footer" style="display:none"><ul><li><a href="/">首页</a></li><li><a href="/about/">关于</a></li><li><a href="/archives/">归档</a></li><li><a href="/tags/">标签</a></li><li><a href="https://github.com/houqian">项目</a></li><li><a href="/search/">搜索</a></li></ul></div><div id="toc-footer" style="display:none"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#背景"><span class="toc-number">1.</span> <span class="toc-text">背景</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#s1-发送成功"><span class="toc-number">1.1.</span> <span class="toc-text">s1:发送成功</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#s2-超出配额"><span class="toc-number">1.2.</span> <span class="toc-text">s2:超出配额</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#换个重发"><span class="toc-number">1.2.1.</span> <span class="toc-text">换个重发</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#独立状态服务"><span class="toc-number">1.2.2.</span> <span class="toc-text">独立状态服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#小结"><span class="toc-number">1.2.3.</span> <span class="toc-text">小结</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#换个思路"><span class="toc-number">2.</span> <span class="toc-text">换个思路</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#小结-1"><span class="toc-number">2.1.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#最后方案"><span class="toc-number">3.</span> <span class="toc-text">最后方案</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Reference"><span class="toc-number">4.</span> <span class="toc-text">Reference</span></a></li></ol></div><div id="share-footer" style="display:none"><ul><li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://houqian.xyz/2016/05/31/看起来简单的通知推送服务，真的简单吗/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=http://houqian.xyz/2016/05/31/看起来简单的通知推送服务，真的简单吗/&text=看起来简单的通知推送服务，真的简单吗"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://houqian.xyz/2016/05/31/看起来简单的通知推送服务，真的简单吗/&title=看起来简单的通知推送服务，真的简单吗"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://houqian.xyz/2016/05/31/看起来简单的通知推送服务，真的简单吗/&is_video=false&description=看起来简单的通知推送服务，真的简单吗"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=看起来简单的通知推送服务，真的简单吗&body=Check out this article: http://houqian.xyz/2016/05/31/看起来简单的通知推送服务，真的简单吗/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=http://houqian.xyz/2016/05/31/看起来简单的通知推送服务，真的简单吗/&title=看起来简单的通知推送服务，真的简单吗"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=http://houqian.xyz/2016/05/31/看起来简单的通知推送服务，真的简单吗/&title=看起来简单的通知推送服务，真的简单吗"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://houqian.xyz/2016/05/31/看起来简单的通知推送服务，真的简单吗/&title=看起来简单的通知推送服务，真的简单吗"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=http://houqian.xyz/2016/05/31/看起来简单的通知推送服务，真的简单吗/&title=看起来简单的通知推送服务，真的简单吗"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.tumblr.com/share/link?url=http://houqian.xyz/2016/05/31/看起来简单的通知推送服务，真的简单吗/&name=看起来简单的通知推送服务，真的简单吗&description=&lt;!-- build time:Fri Jul 12 2019 17:34:38 GMT+0800 (GMT+08:00) --&gt;&lt;p&gt;&lt;img src=&#34;/2016/05/31/看起来简单的通知推送服务，真的简单吗/pexels-photo-335907.jpeg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;&lt;h1 id=&#34;背景&#34;&gt;&lt;a href=&#34;#背景&#34; class=&#34;headerlink&#34; title=&#34;背景&#34;&gt;&lt;/a&gt;背景&lt;/h1&gt;&lt;p&gt;目前OneAlert提供短信、邮件、电话、APP四种通知通道，其中前三种的使用量最高(90%以上的用户)，因此靠谱的第三方推送提供商至关重要。经过对各种三方推送服务的公司调研，目前锁定了阿里大鱼&lt;sup id=&#34;fnref:2&#34;&gt;&lt;a href=&#34;#fn:2&#34; rel=&#34;footnote&#34;&gt;&lt;span class=&#34;hint--top hint--large hint--rounded hint--bounce&#34; aria-label=&#34;https://dayu.aliyun.com 阿里大鱼
&#34;&gt;[2]&lt;/span&gt;&lt;/a&gt;&lt;/sup&gt;、容联云&lt;sup id=&#34;fnref:3&#34;&gt;&lt;a href=&#34;#fn:3&#34; rel=&#34;footnote&#34;&gt;&lt;span class=&#34;hint--top hint--large hint--rounded hint--bounce&#34; aria-label=&#34;https://www.yuntongxun.com/ 容联云
&#34;&gt;[3]&lt;/span&gt;&lt;/a&gt;&lt;/sup&gt;、云片&lt;sup id=&#34;fnref:4&#34;&gt;&lt;a href=&#34;#fn:4&#34; rel=&#34;footnote&#34;&gt;&lt;span class=&#34;hint--top hint--large hint--rounded hint--bounce&#34; aria-label=&#34;https://www.yunpian.com 云片
&#34;&gt;[4]&lt;/span&gt;&lt;/a&gt;&lt;/sup&gt;、云之讯&lt;sup id=&#34;fnref:5&#34;&gt;&lt;a href=&#34;#fn:5&#34; rel=&#34;footnote&#34;&gt;&lt;span class=&#34;hint--top hint--large hint--rounded hint--bounce&#34; aria-label=&#34;https://www.ucpaas.com 云之讯
&#34;&gt;[5]&lt;/span&gt;&lt;/a&gt;&lt;/sup&gt;、SendCloud&lt;sup id=&#34;fnref:6&#34;&gt;&lt;a href=&#34;#fn:6&#34; rel=&#34;footnote&#34;&gt;&lt;span class=&#34;hint--top hint--large hint--rounded hint--bounce&#34; aria-label=&#34;https://sendcloud.sohu.com/ SendCloud&#34;&gt;[6]&lt;/span&gt;&lt;/a&gt;&lt;/sup&gt;，这5家平台提供商。&lt;/p&gt;"><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li></ul></div><div id="actions-footer"><a id="menu" class="icon" href="#" onclick='return $("#nav-footer").toggle(),!1'><i class="fas fa-bars fa-lg" aria-hidden="true"></i> 菜单</a> <a id="toc" class="icon" href="#" onclick='return $("#toc-footer").toggle(),!1'><i class="fas fa-list fa-lg" aria-hidden="true"></i> 目录</a> <a id="share" class="icon" href="#" onclick='return $("#share-footer").toggle(),!1'><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> 分享</a> <a id="top" style="display:none" class="icon" href="#" onclick='$("html, body").animate({scrollTop:0},"fast")'><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> 返回顶部</a></div></div></div><footer id="footer"><div class="footer-left">Copyright &copy; 2019 侯乾</div><div class="footer-right"><nav><ul><li><a href="/">首页</a></li><li><a href="/about/">关于</a></li><li><a href="/archives/">归档</a></li><li><a href="/tags/">标签</a></li><li><a href="https://github.com/houqian">项目</a></li><li><a href="/search/">搜索</a></li></ul></nav></div></footer></div><link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"><link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css"><script src="/lib/jquery/jquery.min.js"></script><script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script><script src="/js/main.js"></script><script type="text/javascript">var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?9b25ec9db5ebea33bd171d5411faa5c1";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,debug:!1,model:{jsonPath:"/live2dw/assets/hijiki.model.json"},display:{position:"left",width:150,height:300},mobile:{show:!0},react:{opacity:.7},log:!1})</script></body></html><!-- rebuild by neat -->